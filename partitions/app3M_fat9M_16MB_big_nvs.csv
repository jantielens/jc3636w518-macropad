# Custom partition table for 16MB flash with OTA (app0/app1) + large FFat
#
# Based on ESP32 Arduino core: app3M_fat9M_16MB.csv
#
# Why:
# - Macro config is stored as a single NVS blob (~22KB) plus device config keys.
# - Default NVS (0x5000 = 20KB) is too small and causes writes to fail.
#
# Changes vs stock:
# - Increase NVS to 0x10000 (64KB)
# - Shift app partitions to keep 0x10000 alignment
# - Reduce FFat by 0x10000 (64KB) to keep coredump at 0xFF0000
#
# Name,   Type, SubType, Offset,  Size, Flags
nvs,      data, nvs,     0x9000,  0x10000,
# Keep otadata right after NVS (does not need 0x10000 alignment)
otadata,  data, ota,     0x19000, 0x2000,
# App partitions must be 0x10000 aligned
app0,     app,  ota_0,   0x20000, 0x300000,
app1,     app,  ota_1,   0x320000,0x300000,
ffat,     data, fat,     0x620000,0x9D0000,
coredump, data, coredump,0xFF0000,0x10000,
# to create/use ffat, see https://github.com/marcmerlin/esp32_fatfsimage
